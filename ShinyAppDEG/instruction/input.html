<!DOCTYPE html>
<html>
<body>


<div align="justify">

<b>Optional: upload a config file</b> Optionally upload a custom configuration file in "yaml" format, where customized default parameters are set such as the color scheme, image width/height, <em>etc.</em> An example file is provided on the left "Download" menu. A specialized yaml file editor is recommended for editing this file, <em>e.g.</em> <a href='https://onlineyamltools.com/edit-yaml' target="_blank">onlineyamltools</a>.
<br/>

<b>Optional: upload batched data/aSVGs in two tar files</b> If there are a large amount of data and aSVG files to visualize, they can be compressed in two separate tar files and uploaded in a batch. See the function <code style="color:brown">write_hdf5</code> for details.
<br/>

<b>Step 1: data sets</b> The "Mustroph" examples are pre-configured aSVGs and data for demonstration, which are microarray assays on <em>Arabidopsis thaliana</em> (Mustroph <em>et al.</em> 2009). The "customData" allows to upload aSVG file(s) and data matrix generated by users in most cases. Only in rare cases, the "customComputedData" is suggested. See details below. 
<br/>

<b>Step 2A: upload one aSVG file</b> Upload an aSVG file generated by users, where the aSVG means spatial features are annotated with unique identifiers. An example aSVG is downloadable below. Note, the aSVG file name should not contain parenthesis. <em>E.g.</em> "arabidopsis.thaliana_root.cross_shm.svg" is expected while "arabidopsis.thaliana_root.cross_shm(1).svg" will cause errors. <br/>

<b>Step 2B: upload multiple aSVG files</b> Upload more than one aSVGs, such as aSVGs representing organs at different growth stages. The order of aSVGs should be indicated by suffixes of "_shm1", "_shm2", ... . <em>e.g.</em> "arabidopsis.thaliana_organ_shm1.svg", "arabidopsis.thaliana_organ_shm2.svg". The spatial heatmaps would be a composite image including all aSVGs. This step takes precedence over "Step 2A". Example aSVGs are downloadable below. A pre-uploaded example is "growthStage_Mustroph" under "Step 1: data sets". <br/>

<b>Step 3: upload a data matrix file</b> Upload the data matrix in tabular file where target samples should have matching spatial features (shapes) in the aSVG(s). Note, the file name should not contain parenthesis. <em>E.g.</em> `arab_expr_example.txt` is expected while `arab_expr_example.txt(1).txt` will raise errors. If "customComputedData" is chosen in Step 1, this file should be generated by the function <code style="color:brown">submatrix</code> in "spatialHeatmap". The separator in the tabular file can only be one of tab, space, comma, or semicolon. <br/>

<b>Step 4: is column or row gene?</b> Specify genes in row or column.<br/>

In the data matrix where row and column names are gene IDs and sample/conditions respectively, the column names MUST follow these naming scheme: <b>1) A sample name is followed by double underscore then the condition. <em>E.g.</em> in "root_pGL2__hypoxia", "root_pGL2" is the sample (atrichoblast epidermis) and "hypoxia" is the condition. 2) The "__" is a reserved separator, so it cannot be used in sample or condition identifiers. 3) Each column name must be unique.</b> To achieve such naming format, simple sample/conditions can be edited in a regular text editor/Excel, while if complex it can be generated with the function <code style="color:brown">filter_data</code> in "spatialHeatmap". One column of metadata (<em>e.g.</em> gene annotation) could be optinally appended to sample/condition at the end, where the column name should not include "__". Only values of samples having a matching feature counterparts in the aSVG are translated to colors in spatial heatmaps. <br/> 

In the case of spatial-temporal data, there are three factors: samples, conditions, and time points. The naming scheme is slightly different and includes three options: 1) combine samples and conditions to make the composite factor sample-condition, then concatenate the new factor and times with double underscore in between, <em>i.e.</em> "sampleCondition__time"; 2) combine samples and times to make the composite factor sample-time, then concatenate the new factor and conditions with double underscore in between, <em>i.e.</em> "sampleTime__condition"; or 3) combine all three factors to make the composite factor "sampleTimeCondition" without double underscore. <br/>
More details about how to set up aSVG file and data matrix are provided in the <a href='https://jianhaizhang.github.io/SVG_tutorial_file/spatialHeatmap.html' target="_blank">package vignette</a> and the <a href='https://jianhaizhang.github.io/SVG_tutorial_file/' target="_blank">SVG tutorial</a>. The example aSVG files and formatted data matrices are provided on the left "Download" menu, and can be uploaded directly for testing after selecting "customData". <br/> <br/>

<b>Custom computed data</b> This field is used only in rare cases the subsetted matrix in Matrix Heatmap panel is unavoidably large and subsequently might lead to app crash during the network computation. Since network modules are identified with WGCNA (Langfelder and Horvath 2008) and the process is computationally intensive for large data matrix (<em>e.g.</em> > 10,000 genes). To maintain good performance, the computation could be done in R using the function <code style="color:brown">adj_mod</code> in "spatialHeatmap", then upload the adjacency matrix "adj.txt" and module definition "mod.txt" to this field. However, in most cases the network computation issue could be resolved by increasing subsetting strigency in Matrix Heatmap. In addition, if "Interactive Network" is not used, this app could handle data matrix with complete genes (<em>e.g.</em> > 40,000) of most organisms.

</div>

</body>
</html>







